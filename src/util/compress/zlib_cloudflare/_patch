diff -ur zconf.h.orig zconf.h
--- zconf.h.orig	2023-11-13 15:40:04.747701100 -0500
+++ zconf.h	2023-11-13 15:32:42.779176600 -0500
@@ -9,6 +9,8 @@
 #define ZCONF_H
 #include <stdint.h>
 
+#define Z_PREFIX
+
 /*
  * If you *really* need a unique prefix for all types and library functions,
  * compile with -DZ_PREFIX. The "standard" zlib should be compiled without it.
@@ -30,6 +32,7 @@
 #  define adler32               z_adler32
 #  define adler32_combine       z_adler32_combine
 #  define adler32_combine64     z_adler32_combine64
+#  define adler32_z             z_adler32_z
 #  ifndef Z_SOLO
 #    define compress              z_compress
 #    define compress2             z_compress2
@@ -111,6 +114,7 @@
 #  define inflateSyncPoint      z_inflateSyncPoint
 #  define inflateUndermine      z_inflateUndermine
 #  define inflateResetKeep      z_inflateResetKeep
+#  define inflateValidate       z_inflateValidate
 #  define inflate_copyright     z_inflate_copyright
 #  define inflate_fast          z_inflate_fast
 #  define inflate_table         z_inflate_table




--- gzguts.h.orig       2023-11-27 10:02:01.338347000 -0500
+++ gzguts.h    2023-11-28 09:34:08.212815700 -0500
@@ -3,6 +3,10 @@
  * For conditions of distribution and use, see copyright notice in zlib.h
  */

+#ifndef _WIN32
+#  include <unistd.h>
+#endif
+
 #ifdef _LARGEFILE64_SOURCE
 #  ifndef _LARGEFILE_SOURCE
 #    define _LARGEFILE_SOURCE 1
